<!DOCTYPE html>
 

<html>
<head>
    <title> Snake </title>
    <style type="text/css">
        body {
            margin: 0 auto;
            padding : 0;
        }
    </style>
    
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script>
        
        $(document).ready(function () {
            //Canvas variables
            var drawCanvas = $("#drawCanvas")[0];
            var ctx = drawCanvas.getCtx("2d");
            var width = $("#drawCanvas").width();
            var height = $("#drawCanvas").height();
            var cell_width = 15;
            var defaultRun;
            //Snake's food
            var apple;
            var userscore;
            var mySnakeArray;
   
           function start() {
                defaultRun = "right";
                createSnake();
                createApple();
                userscore = 0;
               
//clears background and repaints snake every 70ms 
if (typeof game_loop != "undefined") clearInterval(game_loop);
                game_loop = setInterval(paintSnake, 70);
            }
            start();
 
//Creates a snake 5 cells long and adds cells to back of snake to increase length
           function createSnake() {
                var snakeSize = 6;
                mySnakeArray = [];
                for (var s = 0; s<snakeSize-1;s++) {
                    mySnakeArray.push({ x: 0, y: 20 });
                }
            } 
            
 //creates the snake's food and keeps it within the borders
            function createApple() {
                snake_apple = {
                    x: Math.round(Math.random() * (width -                                 cell_width) / cell_width),
                    y: Math.round(Math.random() * (height -                               cell_width) / cell_width),
                };
             }
            
//paints the game background pink and the border blue
            function paintSnake() {
            ctx.fillStyle = "#FFCCFF";
            ctx.fillRect(0, 0, width, height);
            ctt.strokeStyle = "#3300FF";
            ctx.strokeRect(0, 0, width, height);

//this makes it easier to use x and y in the future
                var pop_x = mySnakeArray[0].x;
                var pop_y = mySnakeArray[0].y;
 
//these allow snake to run up, down, left and right
                if (defaultRun == "right") pop_x++;
                else if (defaultRun == "left") pop_x--;
                else if (defaultRun == "down") pop_y++;
                else if (defaultRun == "up") pop_y--;  

// covering all areas making sure everything stays within the border
if (pop_x == -1 || pop_x == width / cell_width || pop_y == -1 || pop_y == height / cell_width || check_collision(pop_x, pop_y, mySnakeArray)) 
                 {
                     start();
                     return;
                 }
                
 //Updates score when an apple is eaten and creates a new apple, also handles the snake colliding with itself to end the game                
                if (pop_x == snake_apple.x && pop_y == snake_apple.y) {
                    var snake_tail = { x: pop_x, y: pop_y };
                    userscore++;
                     createApple();
                }
                else {
                    var snake_tail = mySnakeArray.pop();
                    snake_tail.x = pop_x; snake_tail.y = pop_y;
                }

//Ensures that new cell is added to back of snake rather than front and also paints the added cell
               mySnakeArray.unshift(snake_tail);
 
                for (var i = 0; i < mySnakeArray.length; i++) {
                    var o = mySnakeArray[i];
                
                    paintCell(o.x, o.y);
                }
 
               
            
    </script>
   </head> 
    <body>
</body>
</html>